---
занятие:
  - "[[Как начать работать с микроконтроллерами]]"
дата: 2026-01-25
tags:
  - занятие1
  - теория
---
Вы написали код, скомпилировали его и получили файл прошивки (например, `blink.uf2`). Как записать его в микроконтроллер?

**Программатор** — это аппаратное устройство, которое записывает прошивку во Flash микроконтроллера. Для управления программатором используется специальное программное обеспечение (например, OpenOCD, picotool, ST-Link Utility).

### Типы программаторов

**1. Внешний программатор (ST-Link, J-Link):**
- Отдельное устройство
- Подключается к компьютеру по USB
- Подключается к микроконтроллеру по SWD или JTAG
- Используется для профессиональной разработки

```
ПК ──USB──> Программатор ──SWD──> Микроконтроллер
                                   (Flash память)
```

**2. Встроенный загрузчик (bootloader):**
- Программа внутри микроконтроллера
- Позволяет загружать прошивку без внешнего программатора
- Raspberry Pi Pico использует именно этот способ! Загрузчик хранится в ROM памяти.

### Прошивка Raspberry Pi Pico

Raspberry Pi Pico имеет встроенный загрузчик. Процесс прошивки очень простой:

**Шаг 1:** Подключите Pico к компьютеру, удерживая кнопку BOOTSEL

**Шаг 2:** Pico появится как USB-накопитель (как флешка)

**Шаг 3:** Скопируйте файл `.uf2` на этот накопитель

**Шаг 4:** Pico автоматически перезагрузится и запустит новую прошивку

```
1. Удерживайте BOOTSEL + подключите USB
   ↓
2. Pico появляется как "RPI-RP2" (флешка)
   ↓
3. Скопируйте firmware.uf2 на "флешку"
   ↓
4. Pico перезагружается и запускает прошивку
```

Это гораздо проще, чем с внешним программатором!

### Отладка

Программатор нужен не только для записи прошивки, но и для **отладки** — поиска ошибок в программе.

**Возможности отладки:**
- Остановить выполнение программы в любой момент
- Посмотреть значения переменных
- Выполнить программу по шагам
- Поставить точки останова (breakpoints)

**Для Raspberry Pi Pico:**
- Базовая отладка: вывод в UART (как `printf`)
- Продвинутая отладка: через второй Pico как программатор (Picoprobe)

| **[[SDK — готовые программные компоненты\|Предыдущий раздел]]** | [[Как начать работать с микроконтроллерами\|К занятию]] | **[[Работа с документацией\|Следующий раздел]]** |
| --------------------------------------------------------------- | ------------------------------------------------------- | ------------------------------------------------ |
